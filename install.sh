#!/usr/bin/bash

echo "making /etc/ptdb..."
sudo mkdir /etc/ptdb/

echo "copying db template file and parsers to /etc/ptdb/..."
sudo /usr/bin/cp -i -r ./configs/etc/ptdb/* /etc/ptdb/

echo "making user conf folder..."
mkdir -p ~/.config/ptdb/{engagements,db-servers}

echo "copying example user configs..."
/usr/bin/cp -r -i ./configs/.config/ptdb/* ~/.config/ptdb/
/usr/bin/ln -s ~/.config/ptdb/engagements/SAMPLE-ENGAGEMENT.toml ~/.config/ptdb/engagement.toml
# /usr/bin/ln -s ~/.config/ptdb/db-servers/default.toml ~/.config/ptdb/db-server.toml
/usr/bin/ln -s ~/.config/ptdb/db-servers/default.toml ~/.config/ptdb/db-servers/local.toml

# echo "initializing DB template..."
# ./shell/init-db.sh

echo "building and installing PenTestDB..."
cargo install --path=./

echo "making sample engagement..."
ptdb engagement -a -n SAMPLE-ENGAGEMENT

echo "***DONE***"
echo "use either './shell/new-engagement.sh <engagement-name>' or, 'ptdb engagement -n \"<engagement-name>\"'"
echo "to make a new engagement DB."
