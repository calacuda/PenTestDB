#!/usr/bin/bash

echo "making /etc/ptdb..."
sudo mkdir /etc/ptdb/

echo "copying db template file and parsers to /etc/ptdb/..."
sudo /usr/bin/cp -i -r ./configs/etc/ptdb/* /etc/ptdb/

echo "making user conf folder..."
mkdir -p ~/.config/ptdb/engagements

echo "copying example user configs..."
/usr/bin/cp -r -i ./configs/.config/ptdb/* ~/.config/ptdb/
/usr/bin/ln -s ~/.config/ptdb/engagements/engagement.toml ~/.config/ptdb/engagement.toml

echo "initializing DB template..."
./shell/init-db.sh

echo "making sample engagement..."
./shell/new-engagement.sh SAMPLE-ENGAGEMENT

echo "building and installing PenTestDB..."
cargo install --path=./

echo "***DONE***"
echo "use either './shell/new-engagement.sh <engagement-name>' or, 'ptdb engagement -n \"<engagement-name>\"'"
echo "to make a new engagement DB."
